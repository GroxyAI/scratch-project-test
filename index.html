<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Solar System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: black; }
        canvas { display: block; }
        #info { position: absolute; top: 10px; left: 10px; color: white; font-size: 18px; }
    </style>
</head>
<body>
    <div id="info">Click planets or stars for info! Press 'F' for fullscreen.</div>

    <script>
        // Scene, Camera & Renderer
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Lighting (Sunlight Simulation)
        const light = new THREE.PointLight(0xffffff, 2, 50);
        light.position.set(0, 0, 0);
        scene.add(light);

        // Create Sun (Center of System)
        function createStar(color, size, position, name, event) {
            const geometry = new THREE.SphereGeometry(size, 32, 32);
            const material = new THREE.MeshStandardMaterial({ color, emissive: color });
            const star = new THREE.Mesh(geometry, material);
            star.position.set(...position);
            star.userData = { name, event };
            scene.add(star);
            return star;
        }

        const sun = createStar(0xffcc00, 3, [0, 0, 0], "Sun", "Main Sequence (Stable)");
        const redGiant = createStar(0xff4500, 2, [8, 0, 0], "Red Giant", "Expanding!");
        const supernovaStar = createStar(0xff0000, 1.5, [-8, 0, 0], "Supernova", "üí• About to Explode!");

        // Planets with Orbital Motion
        const planetsData = [
            { name: "Mercury", texture: "https://threejs.org/examples/textures/planets/mercury.jpg", size: 0.4, distance: 4 },
            { name: "Venus", texture: "https://threejs.org/examples/textures/planets/venus_atmosphere.jpg", size: 0.9, distance: 6 },
            { name: "Earth", texture: "https://threejs.org/examples/textures/planets/earth_atmosphere.jpg", size: 1, distance: 8 },
            { name: "Mars", texture: "https://threejs.org/examples/textures/planets/mars_1k.jpg", size: 0.8, distance: 10 },
            { name: "Jupiter", texture: "https://threejs.org/examples/textures/planets/jupiter.jpg", size: 2, distance: 14 },
            { name: "Saturn", texture: "https://threejs.org/examples/textures/planets/saturn.jpg", size: 1.8, distance: 18 },
            { name: "Uranus", texture: "https://threejs.org/examples/textures/planets/uranus.jpg", size: 1.5, distance: 22 },
            { name: "Neptune", texture: "https://threejs.org/examples/textures/planets/neptune.jpg", size: 1.3, distance: 26 }
        ];

        const planets = [];
        planetsData.forEach(data => {
            const geometry = new THREE.SphereGeometry(data.size, 32, 32);
            const texture = new THREE.TextureLoader().load(data.texture);
            const material = new THREE.MeshStandardMaterial({ map: texture });
            const planet = new THREE.Mesh(geometry, material);
            planet.position.x = data.distance;
            planet.userData = { name: data.name };
            scene.add(planet);
            planets.push({ mesh: planet, distance: data.distance, speed: 0.002 + (data.distance * 0.00003) });
        });

        // Camera Position
        camera.position.z = 35;

        // Rotation & Orbital Animation
        function animate() {
            requestAnimationFrame(animate);
            sun.rotation.y += 0.002;
            redGiant.rotation.y += 0.002;
            supernovaStar.rotation.y += 0.002;

            planets.forEach(planet => {
                planet.mesh.rotation.y += 0.002;
                planet.mesh.position.x = Math.cos(Date.now() * planet.speed) * planet.distance;
                planet.mesh.position.z = Math.sin(Date.now() * planet.speed) * planet.distance;
            });

            renderer.render(scene, camera);
        }
        animate();

        // Click Interaction (Planets & Stars)
        window.addEventListener("click", event => {
            const mouse = new THREE.Vector2(
                (event.clientX / window.innerWidth) * 2 - 1,
                -(event.clientY / window.innerHeight) * 2 + 1
            );
            const raycaster = new THREE.Raycaster();
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(planets.map(p => p.mesh).concat([sun, redGiant, supernovaStar]));

            if (intersects.length > 0) {
                if (intersects[0].object === supernovaStar) {
                    alert("üí• Supernova Explosion! Watch it expand.");
                    explodeSupernova(supernovaStar);
                } else {
                    alert(`üåç You clicked on ${intersects[0].object.userData.name}!`);
                }
            }
        });

        // Supernova Animation (Expansion)
        function explodeSupernova(star) {
            let scale = 1.5;
            function expand() {
                if (scale < 6) {
                    star.scale.set(scale, scale, scale);
                    scale += 0.1;
                    requestAnimationFrame(expand);
                } else {
                    scene.remove(star);
                    alert("üí• The supernova has exploded and faded away!");
                }
            }
            expand();
        }

        // Fullscreen Toggle (`F` key)
        document.addEventListener("keydown", event => {
            if (event.key === "f") {
                document.documentElement.requestFullscreen();
            }
        });
    </script>
</body>
</html>
